<section class="editor">
  <h2>Exam Editor</h2>
  <form class="editor-form" [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <mat-form-field appearance="fill">
      <mat-label>Exam content</mat-label>
      <textarea
        matInput
        rows="6"
        formControlName="content"
        (input)="resetValidation()"
        required
        [attr.aria-invalid]="form.controls.content.invalid && form.controls.content.touched"
      ></textarea>
      @if (form.controls.content.invalid && form.controls.content.touched) {
        <mat-error>Content is required.</mat-error>
      }
    </mat-form-field>

    <div class="editor-actions">
      <button mat-stroked-button type="button" (click)="clear()">
        Clear
      </button>
      <button mat-stroked-button color="primary" type="button" (click)="validate()" [disabled]="form.invalid">
        Validate
      </button>
      <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid || !validated()">
        Submit
      </button>
    </div>
  </form>
  @if (validationMessage()) {
    <p class="status success" role="status">{{ validationMessage() }}</p>
  }
  @if (error()) {
    <p class="status error" role="alert">{{ error() }}</p>
  }
  @if (submitted()) {
    <p class="status">Submitted! Redirecting to previewâ€¦</p>
  }
</section>
